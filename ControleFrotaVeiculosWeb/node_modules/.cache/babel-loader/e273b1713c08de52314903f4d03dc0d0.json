{"ast":null,"code":"'use strict';\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    utils = require(\"../../utils/event\"),\n    urlUtils = require(\"../../utils/url\"),\n    XHR = global.XMLHttpRequest;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:browser:xhr');\n}\n\nfunction AbstractXHRObject(method, url, payload, opts) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n  setTimeout(function () {\n    self._start(method, url, payload, opts);\n  }, 0);\n}\n\ninherits(AbstractXHRObject, EventEmitter);\n\nAbstractXHRObject.prototype._start = function (method, url, payload, opts) {\n  var self = this;\n\n  try {\n    this.xhr = new XHR();\n  } catch (x) {}\n\n  if (!this.xhr) {\n    debug('no xhr');\n    this.emit('finish', 0, 'no xhr support');\n\n    this._cleanup();\n\n    return;\n  }\n\n  url = urlUtils.addQuery(url, 't=' + +new Date());\n  this.unloadRef = utils.unloadAdd(function () {\n    debug('unload cleanup');\n\n    self._cleanup(true);\n  });\n\n  try {\n    this.xhr.open(method, url, true);\n\n    if (this.timeout && 'timeout' in this.xhr) {\n      this.xhr.timeout = this.timeout;\n\n      this.xhr.ontimeout = function () {\n        debug('xhr timeout');\n        self.emit('finish', 0, '');\n\n        self._cleanup(false);\n      };\n    }\n  } catch (e) {\n    debug('exception', e);\n    this.emit('finish', 0, '');\n\n    this._cleanup(false);\n\n    return;\n  }\n\n  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {\n    debug('withCredentials');\n    this.xhr.withCredentials = true;\n  }\n\n  if (opts && opts.headers) {\n    for (var key in opts.headers) {\n      this.xhr.setRequestHeader(key, opts.headers[key]);\n    }\n  }\n\n  this.xhr.onreadystatechange = function () {\n    if (self.xhr) {\n      var x = self.xhr;\n      var text, status;\n      debug('readyState', x.readyState);\n\n      switch (x.readyState) {\n        case 3:\n          try {\n            status = x.status;\n            text = x.responseText;\n          } catch (e) {}\n\n          debug('status', status);\n\n          if (status === 1223) {\n            status = 204;\n          }\n\n          if (status === 200 && text && text.length > 0) {\n            debug('chunk');\n            self.emit('chunk', status, text);\n          }\n\n          break;\n\n        case 4:\n          status = x.status;\n          debug('status', status);\n\n          if (status === 1223) {\n            status = 204;\n          }\n\n          if (status === 12005 || status === 12029) {\n            status = 0;\n          }\n\n          debug('finish', status, x.responseText);\n          self.emit('finish', status, x.responseText);\n\n          self._cleanup(false);\n\n          break;\n      }\n    }\n  };\n\n  try {\n    self.xhr.send(payload);\n  } catch (e) {\n    self.emit('finish', 0, '');\n\n    self._cleanup(false);\n  }\n};\n\nAbstractXHRObject.prototype._cleanup = function (abort) {\n  debug('cleanup');\n\n  if (!this.xhr) {\n    return;\n  }\n\n  this.removeAllListeners();\n  utils.unloadDel(this.unloadRef);\n\n  this.xhr.onreadystatechange = function () {};\n\n  if (this.xhr.ontimeout) {\n    this.xhr.ontimeout = null;\n  }\n\n  if (abort) {\n    try {\n      this.xhr.abort();\n    } catch (x) {}\n  }\n\n  this.unloadRef = this.xhr = null;\n};\n\nAbstractXHRObject.prototype.close = function () {\n  debug('close');\n\n  this._cleanup(true);\n};\n\nAbstractXHRObject.enabled = !!XHR;\nvar axo = ['Active'].concat('Object').join('X');\n\nif (!AbstractXHRObject.enabled && axo in global) {\n  debug('overriding xmlhttprequest');\n\n  XHR = function XHR() {\n    try {\n      return new global[axo]('Microsoft.XMLHTTP');\n    } catch (e) {\n      return null;\n    }\n  };\n\n  AbstractXHRObject.enabled = !!new XHR();\n}\n\nvar cors = false;\n\ntry {\n  cors = 'withCredentials' in new XHR();\n} catch (ignored) {}\n\nAbstractXHRObject.supportsCORS = cors;\nmodule.exports = AbstractXHRObject;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(EventEmitter, \"EventEmitter\", \"C:\\\\Users\\\\Adekz\\\\Desktop\\\\app\\\\Pim\\\\ControleFrotaVeiculosWeb\\\\node_modules\\\\sockjs-client\\\\lib\\\\transport\\\\browser\\\\abstract-xhr.js\");\n  reactHotLoader.register(XHR, \"XHR\", \"C:\\\\Users\\\\Adekz\\\\Desktop\\\\app\\\\Pim\\\\ControleFrotaVeiculosWeb\\\\node_modules\\\\sockjs-client\\\\lib\\\\transport\\\\browser\\\\abstract-xhr.js\");\n  reactHotLoader.register(debug, \"debug\", \"C:\\\\Users\\\\Adekz\\\\Desktop\\\\app\\\\Pim\\\\ControleFrotaVeiculosWeb\\\\node_modules\\\\sockjs-client\\\\lib\\\\transport\\\\browser\\\\abstract-xhr.js\");\n  reactHotLoader.register(AbstractXHRObject, \"AbstractXHRObject\", \"C:\\\\Users\\\\Adekz\\\\Desktop\\\\app\\\\Pim\\\\ControleFrotaVeiculosWeb\\\\node_modules\\\\sockjs-client\\\\lib\\\\transport\\\\browser\\\\abstract-xhr.js\");\n  reactHotLoader.register(axo, \"axo\", \"C:\\\\Users\\\\Adekz\\\\Desktop\\\\app\\\\Pim\\\\ControleFrotaVeiculosWeb\\\\node_modules\\\\sockjs-client\\\\lib\\\\transport\\\\browser\\\\abstract-xhr.js\");\n  reactHotLoader.register(cors, \"cors\", \"C:\\\\Users\\\\Adekz\\\\Desktop\\\\app\\\\Pim\\\\ControleFrotaVeiculosWeb\\\\node_modules\\\\sockjs-client\\\\lib\\\\transport\\\\browser\\\\abstract-xhr.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":null,"metadata":{},"sourceType":"script"}